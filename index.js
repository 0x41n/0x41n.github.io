let lists;const getQuery=e=>document.querySelector(e),renderList=e=>{getQuery("#result").innerHTML=0<e.length?e.map(e=>`<a href=${e.url}><div class=ttl>${e.title}</div><p>${e.description}</p><div class=info><i class=i-edit></i>${e.created}<br>${e.tags.filter(e=>e).map(e=>"#"+e).join(" ")} </div></a>`).join(""):"<div class=noresult>なんにも見つけられませんでした</div>"},renderTags=e=>{getQuery("#tab").innerHTML="<a id=all onclick=setTab()>All</a>"+[...new Set(lists.flatMap(e=>e.tags).filter(e=>e))].map(e=>`<a onclick=setTab(this)>${e}</a>`).join("")},fixString=e=>{const t={"ｶﾞ":"ガ","ｷﾞ":"ギ","ｸﾞ":"グ","ｹﾞ":"ゲ","ｺﾞ":"ゴ","ｻﾞ":"ザ","ｼﾞ":"ジ","ｽﾞ":"ズ","ｾﾞ":"ゼ","ｿﾞ":"ゾ","ﾀﾞ":"ダ","ﾁﾞ":"ヂ","ﾂﾞ":"ヅ","ﾃﾞ":"デ","ﾄﾞ":"ド","ﾊﾞ":"バ","ﾋﾞ":"ビ","ﾌﾞ":"ブ","ﾍﾞ":"ベ","ﾎﾞ":"ボ","ﾊﾟ":"パ","ﾋﾟ":"ピ","ﾌﾟ":"プ","ﾍﾟ":"ペ","ﾎﾟ":"ポ","ｳﾞ":"ヴ","ﾜﾞ":"ヷ","ｦﾞ":"ヺ","ｱ":"ア","ｲ":"イ","ｳ":"ウ","ｴ":"エ","ｵ":"オ","ｶ":"カ","ｷ":"キ","ｸ":"ク","ｹ":"ケ","ｺ":"コ","ｻ":"サ","ｼ":"シ","ｽ":"ス","ｾ":"セ","ｿ":"ソ","ﾀ":"タ","ﾁ":"チ","ﾂ":"ツ","ﾃ":"テ","ﾄ":"ト","ﾅ":"ナ","ﾆ":"ニ","ﾇ":"ヌ","ﾈ":"ネ","ﾉ":"ノ","ﾊ":"ハ","ﾋ":"ヒ","ﾌ":"フ","ﾍ":"ヘ","ﾎ":"ホ","ﾏ":"マ","ﾐ":"ミ","ﾑ":"ム","ﾒ":"メ","ﾓ":"モ","ﾔ":"ヤ","ﾕ":"ユ","ﾖ":"ヨ","ﾗ":"ラ","ﾘ":"リ","ﾙ":"ル","ﾚ":"レ","ﾛ":"ロ","ﾜ":"ワ","ｦ":"ヲ","ﾝ":"ン","ｧ":"ァ","ｨ":"ィ","ｩ":"ゥ","ｪ":"ェ","ｫ":"ォ","ｯ":"ッ","ｬ":"ャ","ｭ":"ュ","ｮ":"ョ","｡":"。","､":"、","ｰ":"ー","｢":"「","｣":"」","･":"・"};return e.replace(/[！-～]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).toLowerCase().replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96)).replace(new RegExp("("+Object.keys(t).join("|")+")","g"),e=>t[e]).replace(/ﾞ/g,"゛").replace(/ﾟ/g,"゜")},searchItem=(t,a="")=>lists.filter(e=>"true"==e.list&&(""==t||fixString([e.title,e.description,...e.tags].join(" ")).includes(fixString(t)))&&(""==a||e.tags.includes(a))),updateHash=(e,t)=>{var a=[];t&&a.push("tag="+encodeURIComponent(t)),e&&a.push("keyword="+encodeURIComponent(e)),e||t?history.pushState(null,"","#"+a.join("&")):history.pushState(null,"",location.pathname)},applyHash=e=>{let t=new URLSearchParams(location.hash.slice(1)),a=t.get("tag")||"";document.querySelectorAll("#tab a").forEach(e=>{e.textContent==a?e.classList.add("active"):e.classList.remove("active")}),""==a&&getQuery("#all").classList.add("active"),renderList(searchItem(t.get("keyword")||"",a))},setTab=e=>{updateHash(getQuery("#search").value||"",e?e.textContent:""),applyHash()},setKeyword=e=>{updateHash(getQuery("#search").value||"",new URLSearchParams(location.hash.slice(1)).get("tag")||""),applyHash()};window.addEventListener("DOMContentLoaded",e=>{fetch("pages.json").then(e=>e.json()).then(e=>{lists=e.filter(e=>"true"==e.list).sort((e,t)=>new Date(t.created)-new Date(e.created)),renderTags(),renderList(lists),applyHash(),loadCommon("#foot","/templates/foot.html")}),getQuery("#search").addEventListener("keydown",e=>{"Enter"==e.key&&setKeyword()})}),window.addEventListener("popstate",applyHash);